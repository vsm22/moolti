{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./core/figure.js","webpack:///./core/anchor.js","webpack:///./index.js","webpack:///./core/animator.js","webpack:///./figures/arc.js","webpack:///./figures/rect.js","webpack:///./transformations/transform.js","webpack:///./transformations/rotate.js","webpack:///./transformations/get-distance.js","webpack:///./transformations/position-on-linear-path.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Figure","animator","params","_classCallCheck","this","canvas","ctx","linkedParams","assign","fillStyle","strokeStyle","lineWidth","updateParams","subFigures","subscribeFigure","_this","keys","forEach","updateLinkedParams","newSubFigure","push","targetSubFigure","filter","subFigure","draw","setStyles","Anchor","initParams","paramFunc","subscribeAnchor","newParams","getLinkedParam","window","document","getElementsByTagName","Animator","anchor1","createAnchor","_transform2","default","getDistance","v","positionOnLinearPath","x0","y0","x1","y1","go","rectAnchor","Arc","linked","cx","cy","Rect","x","y","width","animate","getContext","anchors","figures","newFigure","newAnchor","Date","now","anchor","figure","clearRect","height","drawFrame","requestAnimationFrame","startAngle","endAngle","Math","PI","anticlockwise","_possibleConstructorReturn","__proto__","getPrototypeOf","_get","beginPath","arc","antiClockwise","fill","rect","Transform","callStack","recursiveTransform","func","callParams","undefined","rotate","length","rotAngle","newX","newY","hyp","sqrt","origAngle","acos","abs","newAngle","cos","sin","t0","d0","dmax","a","op","h","th","asin","xDist","yDist"],"mappings":"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","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","/**\n * Abstract class representing a single figure in the animation\n */\nclass Figure {\n  constructor(animator, params) {\n    this.animator = animator;\n    this.canvas = this.animator.canvas;\n    this.ctx = this.animator.ctx;\n\n    this.params = {};\n    this.linkedParams = {};\n\n    params = Object.assign({\n      fillStyle: \"#000\",\n      strokeStyle: \"#000\",\n      lineWidth: 1\n    }, params);\n\n    this.updateParams(params);\n\n    this.subFigures = [];\n\n    this.animator.subscribeFigure(this);\n  }\n\n  updateParams(params) {\n    const _this = this;\n\n    Object.keys(params).forEach(key => {\n      if (typeof params[key] === \"function\") {\n        _this.linkedParams[key] = params[key];\n      }\n    });\n\n    this.params = Object.assign(this.params, params);\n    this.updateLinkedParams();\n  }\n\n  updateLinkedParams() {\n    const _this = this;\n\n    Object.keys(this.linkedParams).forEach(key => {\n      _this.params[key] = _this.linkedParams[key]();\n    });\n  }\n\n  /**\n   * Add a subFigure to this figure\n   */\n  addSubFigure(newSubFigure) {\n    this.subFigures.push(newSubFigure);\n  }\n\n  /**\n   * Remove a subfigure from this figure\n   */\n  removeSubFigure(targetSubFigure) {\n    this.subFigures = this.subFigures.filter(subFigure => {\n      return subFigure !== targetSubFigure\n    });\n  }\n\n  /**\n   * Set styles for the canvas context prior to drawing this AnimationElement\n   */\n  setStyles() {\n    this.ctx.strokeStyle = this.params.strokeStyle;\n    this.ctx.fillStyle = this.params.fillStyle;\n  }\n\n  /**\n   * Abstract draw method each AnimationElement implementation must override\n   */\n  draw() {\n    this.subFigures.forEach(subFigure => {\n      subFigure.draw();\n    });\n    this.updateLinkedParams();\n    this.setStyles();\n  }\n}\n\nexport default Figure\n","/**\n * An anchor represents a store of parameters that may change\n * with each animation frame according to a param function\n */\nclass Anchor {\n  constructor(animator, initParams, paramFunc) {\n    this.animator = animator;\n    this.canvas = this.animator.canvas;\n    this.ctx = this.animator.ctx;\n    this.params = initParams || {};\n    this.paramFunc = paramFunc;\n    this.animator.subscribeAnchor(this);\n  }\n\n  /**\n   * Update the params for this anchor according to the param function\n   */\n  updateParams(t) {\n    let _this = this;\n\n    if (typeof this.paramFunc === \"function\") {\n      let newParams = this.paramFunc(Object.assign(_this.params, {t: t}));\n\n      Object.keys(newParams).forEach(key => {\n        _this.params[key] = newParams[key];\n      });\n    }\n  }\n\n  /**\n   * Return the params for this anchor\n   */\n  getParams() {\n    const _this = this;\n\n    return _this.params;\n  }\n\n  /**\n   * Return a function to retrieve a keyed linked param\n   */\n  getLinkedParam(key) {\n    const _this = this;\n    return function() {\n      return _this.params[key];\n    }\n  }\n\n  /**\n   * Alias for getLinkedParam\n   */\n  linked(key) {\n    return this.getLinkedParam(key);\n  }\n}\n\nexport default Anchor\n","import Animator from \"./core/animator\";\nimport Figure from \"./core/figure\";\nimport Anchor from \"./core/anchor\";\nimport Arc from \"./figures/arc\";\nimport Rect from \"./figures/rect\";\nimport Transform from \"./transformations/transform\";\n\nlet canvas = window.document.getElementsByTagName(\"canvas\")[0];\nlet animator = new Animator(canvas);\n\nlet anchor1 = animator.createAnchor({},\n  Transform()\n    .getDistance({\"v\": 0.1})\n    .positionOnLinearPath({\"x0\": 0, \"y0\": 0, \"x1\": 500, \"y1\": 100})\n    .go()\n);\n\nlet arc = new Arc(animator, {\n  fillStyle: () => \"rgb(\" + anchor1.linked(\"d\")() + \",100,120\",\n  cx: anchor1.linked(\"x\"),\n  cy: anchor1.linked(\"y\"),\n  r: 10\n});\n\nlet rectAnchor = animator.createAnchor({},\n    Transform()\n      .getDistance({\"v\": 0.1})\n      .positionOnLinearPath({\"x0\": 10, \"y0\": 20, \"x1\": 500, \"y1\": 200})\n      .go()\n  );\n  \nlet rect = new Rect(animator, {\n    fillStyle: () => \"rgb(\" + anchor1.linked(\"d\")() + \",20,220\",\n    x: rectAnchor.linked(\"x\"),\n    y: rectAnchor.linked(\"y\"),\n    width: rectAnchor.linked(\"x\")\n});\n\nanimator.animate();\n","import Anchor from \"./anchor\";\n\nclass Animator {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.anchors = [];\n    this.figures = [];\n  }\n\n  /**\n   * Create a new Anchor associated with this animator\n   */\n   createAnchor(initParams, paramFunc) {\n     return new Anchor(this, initParams, paramFunc);\n   }\n\n   /**\n    * Add a new figure to list of subscribers and return it\n    */\n  createFigure(newFigure) {\n    this.figures.push(newFigure);\n    return newFigure;\n  }\n\n  /**\n   * Add an anchor to update on each animation cycle\n   */\n  subscribeAnchor(newAnchor) {\n    this.anchors.push(newAnchor);\n  }\n\n  /**\n   * Add a figure to draw on each animation cycle\n   */\n  subscribeFigure(newFigure) {\n    this.figures.push(newFigure);\n  }\n\n  /**\n   * Draw a single frame\n   */\n  drawFrame() {\n    let t = Date.now();\n\n    this.anchors.forEach(anchor => {\n      anchor.updateParams(t);\n    });\n\n    this.figures.forEach(figure => {\n      figure.draw();\n    });\n  }\n\n  /**\n   * Draw animation\n   */\n  animate() {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.drawFrame();\n    window.requestAnimationFrame(this.animate.bind(this));\n  }\n}\n\nexport default Animator;\n","import Figure from \"../core/figure\";\n\nclass Arc extends Figure {\n  constructor(animator, params) {\n    params = Object.assign({\n      cx: 0,\n      cy: 0,\n      r: 0,\n      startAngle: 0,\n      endAngle: 2*Math.PI,\n      anticlockwise: false\n    }, params);\n\n    super(animator, params);\n  }\n\n  draw() {\n    super.draw();\n    this.ctx.beginPath();\n    this.ctx.arc(this.params.cx, this.params.cy, this.params.r, this.params.startAngle, this.params.endAngle, this.params.antiClockwise);\n    this.ctx.fill();\n  }\n}\n\nexport default Arc","import Figure from \"../core/figure\";\n\nclass Rect extends Figure {\n\n    constructor(animator, params) {\n\n        params = Object.assign({\n            x: 0,\n            y: 0,\n            width: 10,\n            height: 10\n        }, params);\n\n        super(animator, params);\n  }\n\n  draw() {\n    super.draw();\n    this.ctx.beginPath();\n    this.ctx.rect(this.params.x, this.params.y, this.params.width, this.params.height);\n    this.ctx.fill();\n  }\n}\n\nexport default Rect","import rotate from \"./rotate\";\nimport getDistance from \"./get-distance\";\nimport positionOnLinearPath from \"./position-on-linear-path\";\n\n/**\n * TimeMapping\n */\nconst Transform = function(callStack) {\n  callStack = (callStack !== undefined) ? callStack : [];\n\n  function recursiveTransform(func) {\n    return function(initParams) {\n        callStack.push(\n          function(callParams) {\n            return func(Object.assign({}, initParams, callParams));\n          }\n        );\n        return Transform(callStack);\n    }\n  }\n\n  return {\n    getDistance: recursiveTransform(getDistance),\n    rotate: recursiveTransform(rotate),\n    positionOnLinearPath: recursiveTransform(positionOnLinearPath),\n\n    go: function() {\n      return function(callParams) {\n        for (let i = 0; i < callStack.length; ++i) {\n          callParams = callStack[i](callParams);\n        }\n        return callParams;\n      }\n    }\n  }\n}\n\nexport default Transform\n","/**\n * Rotate a point clockwise around origin\n */\nexport default function(o) {\n  let rotAngle = (o.rotAngle !== undefined) ? o.rotAngle : 0;\n  let x = (o.x !== undefined) ? o.x : 0;\n  let y = (o.y !== undefined) ? o.y : 0;\n  let x0 = (o.x0 !== undefined) ? o.x0 : 0; // x origin\n  let y0 = (o.y0 !== undefined) ? o.y0 : 0; // y origin\n\n  let newX, newY;\n\n  let hyp = Math.sqrt((x-x0)*(x-x0) + (y-y0)*(y-y0)); // hypotenuse\n\n  if (hyp === 0) {\n    newX = x;\n    newY = y;\n  } else {\n    let origAngle = Math.acos(Math.abs(x - x0) / hyp);\n    origAngle = (x >= x0 && y >= y0) ? origAngle // 1st quadrant\n                 : (x < x0 && y >= y0) ? Math.PI - origAngle\n                 : (x < x0 && y < y0) ? Math.PI + origAngle\n                 : 2*Math.PI - origAngle;\n\n    let newAngle = origAngle + rotAngle;\n\n    newX = x0 + Math.cos(newAngle) * hyp;\n    newY = y0 + Math.sin(newAngle) * hyp;\n  }\n\n  return Object.assign({}, o, {x: newX, y: newY});\n}\n","export default function getDistance(o) {\n  o = Object.assign({\n      \"t\": 0,\n      \"t0\": 0,\n      \"d\": 0,\n      \"d0\": 0,\n      \"dmax\": -1,\n      \"v\": 0,\n      \"a\": 0\n  }, o);\n\n  o[\"d\"] = (o[\"v\"] * (o[\"t\"] - o[\"t0\"]))  + (0.5 * o[\"a\"] * (o[\"t\"] - o[\"t0\"]) * (o[\"t\"] - o[\"t0\"]));\n\n  if (o[\"dmax\"] >= 0) {\n    o[\"d\"] = o[\"d\"] % o[\"dmax\"];\n  }\n\n  return o;\n}\n","export default function (o) {\n  o = Object.assign({\n    \"x\": 0,\n    \"y\": 0,\n    \"x0\": 0,\n    \"y0\": 0,\n    \"x1\": 0,\n    \"y1\": 0,\n    \"d\": 0\n  }, o);\n\n  let op = Math.abs(o[\"y1\"] - o[\"y0\"]);     // opposite\n  let a = Math.abs(o[\"x1\"] - o[\"x0\"]);      // adjacent\n  let h = Math.sqrt(op*op + a*a); // hypotenuse\n  let th = Math.asin(op / h);     // theta (angle)\n\n  let xDist = (o[\"d\"] % h) * Math.cos(th);   // x-distance\n  let yDist = (o[\"d\"] % h) * Math.sin(th);   // y-distance\n\n  o[\"x\"] = (o[\"x1\"] > o[\"x0\"]) ? o[\"x0\"] + xDist : o[\"x0\"] - xDist;\n  o[\"y\"] = (o[\"y1\"] > o[\"y0\"]) ? o[\"y0\"] + yDist : o[\"y0\"] - yDist;\n\n  return o;\n}\n"],"sourceRoot":""}